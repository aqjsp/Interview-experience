<?xml version="1.0" encoding="UTF-8"?>
<svg width="900" height="500" xmlns="http://www.w3.org/2000/svg">
  <!-- 背景 -->
  <rect width="900" height="500" fill="#f8f9fa"/>
  
  <!-- 标题 -->
  <text x="450" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#2c3e50">布隆过滤器（Bloom Filter）原理图</text>
  
  <!-- QQ号输入 -->
  <text x="50" y="80" font-family="Arial, sans-serif" font-size="14" fill="#34495e">输入QQ号：</text>
  <rect x="150" y="65" width="60" height="25" fill="#3498db" stroke="#2980b9" rx="3"/>
  <text x="180" y="82" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="white">12345</text>
  
  <!-- 哈希函数 -->
  <g transform="translate(50, 120)">
    <text x="0" y="20" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#2c3e50">哈希函数处理：</text>
    
    <!-- Hash1 -->
    <rect x="50" y="40" width="80" height="30" fill="#e74c3c" stroke="#c0392b" rx="5"/>
    <text x="90" y="60" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="white" font-weight="bold">Hash1()</text>
    <text x="90" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#7f8c8d">→ 位置 3</text>
    
    <!-- Hash2 -->
    <rect x="150" y="40" width="80" height="30" fill="#f39c12" stroke="#e67e22" rx="5"/>
    <text x="190" y="60" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="white" font-weight="bold">Hash2()</text>
    <text x="190" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#7f8c8d">→ 位置 7</text>
    
    <!-- Hash3 -->
    <rect x="250" y="40" width="80" height="30" fill="#9b59b6" stroke="#8e44ad" rx="5"/>
    <text x="290" y="60" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="white" font-weight="bold">Hash3()</text>
    <text x="290" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#7f8c8d">→ 位置 11</text>
    
    <!-- 箭头从QQ号到哈希函数 -->
    <path d="M 130 -35 L 90 15" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arrowhead)"/>
    <path d="M 130 -35 L 190 15" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arrowhead)"/>
    <path d="M 130 -35 L 290 15" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arrowhead)"/>
  </g>
  
  <!-- 位数组 -->
  <text x="50" y="240" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#2c3e50">位数组：</text>
  
  <!-- 位数组可视化 -->
  <g transform="translate(50, 260)">
    <!-- 索引标签 -->
    <text x="15" y="15" font-family="Arial, sans-serif" font-size="10" fill="#7f8c8d">索引:</text>
    <text x="35" y="15" font-family="Arial, sans-serif" font-size="10" fill="#7f8c8d">0</text>
    <text x="55" y="15" font-family="Arial, sans-serif" font-size="10" fill="#7f8c8d">1</text>
    <text x="75" y="15" font-family="Arial, sans-serif" font-size="10" fill="#7f8c8d">2</text>
    <text x="95" y="15" font-family="Arial, sans-serif" font-size="10" fill="#7f8c8d">3</text>
    <text x="115" y="15" font-family="Arial, sans-serif" font-size="10" fill="#7f8c8d">4</text>
    <text x="135" y="15" font-family="Arial, sans-serif" font-size="10" fill="#7f8c8d">5</text>
    <text x="155" y="15" font-family="Arial, sans-serif" font-size="10" fill="#7f8c8d">6</text>
    <text x="175" y="15" font-family="Arial, sans-serif" font-size="10" fill="#7f8c8d">7</text>
    <text x="195" y="15" font-family="Arial, sans-serif" font-size="10" fill="#7f8c8d">8</text>
    <text x="215" y="15" font-family="Arial, sans-serif" font-size="10" fill="#7f8c8d">9</text>
    <text x="235" y="15" font-family="Arial, sans-serif" font-size="10" fill="#7f8c8d">10</text>
    <text x="255" y="15" font-family="Arial, sans-serif" font-size="10" fill="#7f8c8d">11</text>
    <text x="275" y="15" font-family="Arial, sans-serif" font-size="10" fill="#7f8c8d">12</text>
    
    <!-- 位数组格子 -->
    <rect x="30" y="20" width="20" height="20" fill="white" stroke="#bdc3c7"/>
    <text x="40" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#7f8c8d">0</text>
    
    <rect x="50" y="20" width="20" height="20" fill="white" stroke="#bdc3c7"/>
    <text x="60" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#7f8c8d">0</text>
    
    <rect x="70" y="20" width="20" height="20" fill="white" stroke="#bdc3c7"/>
    <text x="80" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#7f8c8d">0</text>
    
    <!-- 位置3 - Hash1结果 -->
    <rect x="90" y="20" width="20" height="20" fill="#e74c3c" stroke="#c0392b"/>
    <text x="100" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="white" font-weight="bold">1</text>
    
    <rect x="110" y="20" width="20" height="20" fill="white" stroke="#bdc3c7"/>
    <text x="120" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#7f8c8d">0</text>
    
    <rect x="130" y="20" width="20" height="20" fill="white" stroke="#bdc3c7"/>
    <text x="140" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#7f8c8d">0</text>
    
    <rect x="150" y="20" width="20" height="20" fill="white" stroke="#bdc3c7"/>
    <text x="160" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#7f8c8d">0</text>
    
    <!-- 位置7 - Hash2结果 -->
    <rect x="170" y="20" width="20" height="20" fill="#f39c12" stroke="#e67e22"/>
    <text x="180" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="white" font-weight="bold">1</text>
    
    <rect x="190" y="20" width="20" height="20" fill="white" stroke="#bdc3c7"/>
    <text x="200" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#7f8c8d">0</text>
    
    <rect x="210" y="20" width="20" height="20" fill="white" stroke="#bdc3c7"/>
    <text x="220" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#7f8c8d">0</text>
    
    <rect x="230" y="20" width="20" height="20" fill="white" stroke="#bdc3c7"/>
    <text x="240" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#7f8c8d">0</text>
    
    <!-- 位置11 - Hash3结果 -->
    <rect x="250" y="20" width="20" height="20" fill="#9b59b6" stroke="#8e44ad"/>
    <text x="260" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="white" font-weight="bold">1</text>
    
    <rect x="270" y="20" width="20" height="20" fill="white" stroke="#bdc3c7"/>
    <text x="280" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#7f8c8d">0</text>
    
    <!-- 箭头从哈希函数到位数组 -->
    <path d="M 90 -70 L 100 -5" stroke="#e74c3c" stroke-width="2" marker-end="url(#arrowhead)"/>
    <path d="M 190 -70 L 180 -5" stroke="#f39c12" stroke-width="2" marker-end="url(#arrowhead)"/>
    <path d="M 290 -70 L 260 -5" stroke="#9b59b6" stroke-width="2" marker-end="url(#arrowhead)"/>
  </g>
  
  <!-- 查询过程 -->
  <text x="50" y="360" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#2c3e50">查询过程示例：</text>
  
  <!-- 查询QQ号 -->
  <g transform="translate(50, 380)">
    <text x="0" y="20" font-family="Arial, sans-serif" font-size="12" fill="#34495e">查询QQ号 67890：</text>
    
    <!-- 查询结果的哈希函数 -->
    <rect x="150" y="5" width="80" height="25" fill="#e74c3c" stroke="#c0392b" rx="3"/>
    <text x="190" y="22" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">Hash1() → 3</text>
    
    <rect x="240" y="5" width="80" height="25" fill="#f39c12" stroke="#e67e22" rx="3"/>
    <text x="280" y="22" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">Hash2() → 5</text>
    
    <rect x="330" y="5" width="80" height="25" fill="#9b59b6" stroke="#8e44ad" rx="3"/>
    <text x="370" y="22" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">Hash3() → 11</text>
    
    <!-- 检查结果 -->
    <text x="0" y="50" font-family="Arial, sans-serif" font-size="12" fill="#34495e">检查位数组：</text>
    <text x="100" y="50" font-family="Arial, sans-serif" font-size="12" fill="#27ae60">位置3=1 ✓</text>
    <text x="180" y="50" font-family="Arial, sans-serif" font-size="12" fill="#e74c3c">位置5=0 ✗</text>
    <text x="260" y="50" font-family="Arial, sans-serif" font-size="12" fill="#27ae60">位置11=1 ✓</text>
    
    <text x="0" y="70" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#e74c3c">结果：67890 一定不存在（有0位）</text>
  </g>
  
  <!-- 误判示例 -->
  <g transform="translate(450, 380)">
    <text x="0" y="20" font-family="Arial, sans-serif" font-size="12" fill="#34495e">查询QQ号 88888：</text>
    
    <!-- 误判的哈希函数 -->
    <rect x="150" y="5" width="80" height="25" fill="#e74c3c" stroke="#c0392b" rx="3"/>
    <text x="190" y="22" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">Hash1() → 3</text>
    
    <rect x="240" y="5" width="80" height="25" fill="#f39c12" stroke="#e67e22" rx="3"/>
    <text x="280" y="22" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">Hash2() → 7</text>
    
    <rect x="330" y="5" width="80" height="25" fill="#9b59b6" stroke="#8e44ad" rx="3"/>
    <text x="370" y="22" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">Hash3() → 11</text>
    
    <!-- 检查结果 -->
    <text x="0" y="50" font-family="Arial, sans-serif" font-size="12" fill="#34495e">检查位数组：</text>
    <text x="100" y="50" font-family="Arial, sans-serif" font-size="12" fill="#27ae60">位置3=1 ✓</text>
    <text x="180" y="50" font-family="Arial, sans-serif" font-size="12" fill="#27ae60">位置7=1 ✓</text>
    <text x="260" y="50" font-family="Arial, sans-serif" font-size="12" fill="#27ae60">位置11=1 ✓</text>
    
    <text x="0" y="70" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#f39c12">结果：88888 可能存在（误判！）</text>
  </g>
  
  <!-- 特点说明 -->
  <rect x="500" y="120" width="350" height="120" fill="#ecf0f1" stroke="#bdc3c7" rx="5"/>
  <text x="675" y="140" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#2c3e50">布隆过滤器特点</text>
  <text x="520" y="160" font-family="Arial, sans-serif" font-size="12" fill="#27ae60">✓ 空间效率极高</text>
  <text x="520" y="175" font-family="Arial, sans-serif" font-size="12" fill="#27ae60">✓ 查询速度快 O(k)</text>
  <text x="520" y="190" font-family="Arial, sans-serif" font-size="12" fill="#e74c3c">✗ 存在误判率（False Positive）</text>
  <text x="520" y="205" font-family="Arial, sans-serif" font-size="12" fill="#e74c3c">✗ 无法删除元素</text>
  <text x="520" y="220" font-family="Arial, sans-serif" font-size="12" fill="#e74c3c">✗ 无法获取原始数据</text>
  
  <!-- 箭头标记定义 -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#7f8c8d"/>
    </marker>
  </defs>
</svg>